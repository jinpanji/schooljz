(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/information/addchildmsg"],{1862:function(t,e,n){"use strict";var i=n("6eb5"),o=n.n(i);o.a},"28cb":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){n.e("components/common/buslist").then(function(){return resolve(n("acee"))}.bind(null,n)).catch(n.oe)},o=function(){n.e("components/common/xfl-select/xfl-select").then(function(){return resolve(n("ac88"))}.bind(null,n)).catch(n.oe)};function s(t){var e=new Date,n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return"start"===t?n-=60:"end"===t&&(n+=2),i=i>9?i:"0"+i,o=o>9?o:"0"+o,"".concat(n,"-").concat(i,"-").concat(o)}var l={components:{Buslist:i,xflSelect:o},data:function(){return{list:[],xblist:["女","男"],xbcheck:0,gxlist:["父亲","母亲","爷爷","奶奶","叔叔","阿姨"],gxcheck:0,classlist:["一年级","二年级","三年级","四年级","五年级","六年级"],classCheck:0,date:s({format:!0}),startDate:s("start"),endDate:s("end"),time:"12:01",isNull:!1,form:{name:"",sex:0,grade:1,relation:"父亲",birthDate:""},selectValue:"",lineInfo:{linesId:0,sitesId:0},lineStrlist:[],linesList:[]}},onLoad:function(){var e=t.getStorageSync("addchildinfo");e=JSON.parse(e),this.form=e,this.form.name="",this.form.sex=0,this.form.grade=1,e.schoolId?this.getlinesList():this.isNull=!0;var n=t.getStorageSync("userInfo");n?(n=JSON.parse(n),this.form.parentId=n.id):t.showToast({icon:"none",title:"请登录后操作"})},methods:{xbchange:function(t){console.log(t),this.form.sex=t.detail.value,this.xbcheck=t.detail.value},gxchange:function(t){console.log(t),this.form.relation=this.gxlist[t.detail.value],this.gxcheck=t.detail.value,console.log(this.form.relation)},classchange:function(t){this.form.grade=1*t.detail.value+1,this.classCheck=t.detail.value},bindDateChange:function(t){this.date=t.detail.value,this.form.birthDate=t.detail.value,console.log(this.form.birthDate)},bindTimeChange:function(t){this.time=t.detail.value},goRouter:function(){console.log(this.form),this.isNull?this.form.schoolId?this.add(1):this.feedBack():this.lineInfo.id&&this.lineInfo.siteId?this.add(2):this.lineInfo.linesId?t.showToast({icon:"none",title:"请选择站点"}):t.showToast({icon:"none",title:"请选择线路及站点"})},selectChange:function(t){console.log("选择线路"),console.log(t),this.lineInfo=this.linesList[t.index],console.log(this.lineInfo),this.list=this.linesList[t.index].sites,console.log(this.list)},changeLine:function(t){var e=this;console.log("父组件获取"),console.log(t),this.lineInfo.siteId=t;var n=this.list;n.forEach((function(n,i){n.id==t&&(e.lineInfo.siteName=n.name)}))},feedBack:function(){this.form.childrenId||(this.form.childrenId=""),t.showLoading({icon:"loading",title:"正在提交反馈，请稍后!"}),this.$http.post("puFeedback/add",this.form).then((function(e){100==e.code&&(t.hideLoading(),t.navigateTo({url:"declaration"}))}))},add:function(e){var n=this;console.log(!this.form.birthDate),console.log(this.form.birthDate),this.form.name||this.form.crazz||this.form.birthDate?(console.log("提交"),console.log(this.form),t.showLoading({icon:"loading",title:"正在提交，请稍后!"}),this.$http.post("puchildren/add",this.form).then((function(i){if(100==i.code)if(t.hideLoading(),n.form.childrenId=i.info,t.showToast({icon:"success",title:"添加成功！"}),1==e)n.feedBack(),t.navigateTo({url:"declaration"});else if(2==e){n.lineInfo.childrenId=i.info;var o=JSON.stringify(n.lineInfo);t.setStorageSync("userlinesInfo",o),t.navigateTo({url:"payment"})}else t.showToast({icon:"success",title:"添加成功！"}),t.switchTab({url:"../../pages/my/index"});else t.hideLoading(),t.showToast({icon:"none",title:i.msg})}))):t.showToast({icon:"none",title:"请填写完整的信息！"})},getlinesList:function(){var t=this;this.$http.post("puProduct/getProductBySchoolId",{schoolId:this.form.schoolId}).then((function(e){if(100==e.code)if(0==e.info.length)t.isNull=!0;else{t.isNull=!1,t.list=[];var n=e.info;t.linesList=e.info,console.log(n),n.length>0&&(t.lineStrlist=[],n.forEach((function(e,n){t.lineStrlist.push(e.name)})),console.log(t.lineStrlist))}}))}}};e.default=l}).call(this,n("543d")["default"])},2963:function(t,e,n){"use strict";(function(t){n("83be");i(n("66fd"));var e=i(n("900d"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"6eb5":function(t,e,n){},"900d":function(t,e,n){"use strict";n.r(e);var i=n("b825"),o=n("ad40");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("1862");var l,c=n("f0c5"),a=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"e8ce28c6",null,!1,i["a"],l);e["default"]=a.exports},ad40:function(t,e,n){"use strict";n.r(e);var i=n("28cb"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},b825:function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}))}},[["2963","common/runtime","common/vendor"]]]);