(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/info/renew"],{"242f":function(e,t,n){"use strict";(function(e){n("83be");i(n("66fd"));var t=i(n("4ca3"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"2e28":function(e,t,n){"use strict";n.r(t);var i=n("314d"),o=n.n(i);for(var c in i)"default"!==c&&function(e){n.d(t,e,(function(){return i[e]}))}(c);t["default"]=o.a},"314d":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){n.e("components/common/select").then(function(){return resolve(n("c2b9"))}.bind(null,n)).catch(n.oe)},o=function(){n.e("components/common/xfl-select/xfl-select").then(function(){return resolve(n("ac88"))}.bind(null,n)).catch(n.oe)},c={components:{Select:i,xflSelect:o},data:function(){return{school:0,current:!1,checknum:0,checkList:null,childList:[],childStrlist:[],selectValue:"",childrenId:null,form:{},money:"",smList:[{bj:n("0b0f"),type:1,text:"早接",xlList:["默认之前选择的线路"],closeDate:"",price:""},{bj:n("d5c6"),type:2,text:"晚送",xlList:["默认之前选择的线路"],closeDate:"",price:""},{bj:n("203e"),type:3,text:"全包",xlList:["默认之前选择的线路"],closeDate:"",price:""}],linesInfo:{},orderInfo:{type:"",siteId:"",siteName:"",childrenId:"",productId:"",name:""}}},onLoad:function(){var t=e.getStorageSync("userInfo");this.userInfo=JSON.parse(t),this.getList()},methods:{changeList:function(e){this.checkList=e,this.orderInfo.type=this.smList[e].type,this.money=this.smList[e].price},selectChange:function(e){console.log(e),this.childrenId=this.childList[e.index].id,this.orderInfo.childrenId=this.childrenId,this.selectValue=e.newVal,this.getLines()},changNum:function(e){console.log("changenum"),console.log(e)},Settlement:function(){console.log(this.orderInfo)},getList:function(){var e=this;this.$http.post("puchildren/listByParentId",{parentId:this.userInfo.id}).then((function(t){if(100==t.code){var n=t.info;e.childList=[],e.childStrlist=[],n.length>0&&(e.selectValue=n[0].name,e.childrenId=n[0].id,e.orderInfo.childrenId=n[0].id,e.getLines(),n.forEach((function(t,n){e.childList.push(t),e.childStrlist.push(t.name)})))}}))},getLines:function(){var e=this;this.$http.post("puProduct/listProductByChildrenId",{childrenId:this.childrenId}).then((function(t){if(100==t.code){var n=t.info.productVos;e.linesInfo=t.info,e.orderInfo.productId=t.info.productId,e.orderInfo.siteId=t.info.siteIId,e.orderInfo.siteName=t.info.siteName,e.orderInfo.name=n[0].productName,n.forEach((function(t,n){1==t.type&&(e.smList[0].closeDate=t.closeDate,e.smList[0].price=t.price),2==t.type&&(e.smList[1].closeDate=t.closeDate,e.smList[1].price=t.price),3==t.type&&(e.smList[2].closeDate=t.closeDate,e.smList[2].price=t.price)}))}}))},goPay:function(){var t=this,n=this.orderInfo;if(n.parentId=this.userInfo.id,n.openId=this.userInfo.wechatOpenid,this.payInfo=n,console.log(this.payInfo),n.type&&n.childrenId&&n.productId)e.showLoading({icon:"loading",title:"正在提交订单"}),this.$http.post("puProduct/createBuyOrder",n,"application/json").then((function(n){100==n.code&&(t.payres=n.info,t.wxPay(n.info),e.hideLoading())}));else{var i="";n.type?n.childrenId?n.productId||(i="还没有购买过产品"):i="请选择学生":i="请选择产品",e.showToast({icon:"none",title:i})}},wxPay:function(t){var n=this;e.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.packageValue,signType:"MD5",paySign:t.paySign,success:function(t){console.log("success:"+JSON.stringify(t)),e.showToast({icon:"success",title:"支付成功"}),setTimeout((function(){e.switchTab({url:"../../pages/my/index"})}),2e3)},fail:function(t){console.log("支付失败"),console.log("fail:"+JSON.stringify(t)),e.showToast({icon:"none",title:"支付失败"}),n.isShow=!0}})},goMore:function(){console.log("更多"),e.navigateTo({url:"../information/addchildschool?type=2&childId="+this.childrenId})}}};t.default=c}).call(this,n("543d")["default"])},"47af":function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement;e._self._c},c=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i}))},"4ca3":function(e,t,n){"use strict";n.r(t);var i=n("47af"),o=n("2e28");for(var c in o)"default"!==c&&function(e){n.d(t,e,(function(){return o[e]}))}(c);n("c3e3");var s,r=n("f0c5"),l=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"7decac3d",null,!1,i["a"],s);t["default"]=l.exports},6352:function(e,t,n){},c3e3:function(e,t,n){"use strict";var i=n("6352"),o=n.n(i);o.a}},[["242f","common/runtime","common/vendor"]]]);