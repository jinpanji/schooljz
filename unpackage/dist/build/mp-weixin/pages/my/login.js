(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/login"],{"0228":function(t,n,o){"use strict";o.r(n);var e=o("1188"),i=o.n(e);for(var c in e)"default"!==c&&function(t){o.d(n,t,(function(){return e[t]}))}(c);n["default"]=i.a},1188:function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{btnStr:"获取验证码",codeFlag:!0,regCode:"",phone:"",type:0,parentId:"",windowHeight:""}},onLoad:function(n){console.log("登录登录"),console.log(n),n.type&&(this.type=n.type,this.parentId=n.parentId);var o=t.getSystemInfoSync();this.windowHeight=o.windowHeight},onShow:function(){this.regCode=""},methods:{goReg:function(){t.navigateTo({url:"reg?phone=18827612391"})},bindGetUserInfo:function(n){var o=this;console.log("获取微信用户数据"),console.log(n);var e=this;wx.login({success:function(n){console.log("获取code"),console.log(n);var i=n.code;console.log(i),wx.getUserInfo({success:function(n){console.log("获取用户信息"),o.avatarUrl=n.userInfo.avatarUrl,e.$http.post("puparent/wxGrantLogin",{type:o.type,code:i,encryptedData:n.encryptedData,rawData:n.rawData,signature:n.signature,iv:n.iv,parentId:o.parentId}).then((function(n){if(console.log(n),300==n.code)t.navigateTo({url:"reg?avatar="+e.avatarUrl+"&openid="+n.info});else if(100==n.code){var o="";o=JSON.stringify(n.info),t.setStorageSync("userInfo",o),t.showToast({icon:"none",title:"登录成功！"}),setTimeout((function(){t.switchTab({url:"./index"})}),2e3)}}))},fail:function(t){console.log("请求出错"),console.log(t)}})},fail:function(t){console.log(t)}})},login:function(){var n=this;console.log("登录"),this.$http.post("puparent/verification",{phone:this.phone,code:this.regCode}).then((function(o){100==o.code?n.submitInfo():250==o.code&&t.showToast({icon:"none",title:o.msg})}))},getCodenum:function(){var n=this;console.log("获取验证码"),this.codeFlag&&(console.log("验证"),console.log(/^1[3456789]\d{9}$/.test(this.phone)),/^1[3456789]\d{9}$/.test(this.phone)||(this.codeFlag=!1,t.showToast({icon:"none",title:"请输入正确的手机号码！"}))),this.codeFlag?(this.codeFlag=!1,t.showLoading({icon:"loading",title:"正在发送！"}),this.$http.post("puparent/produceCode",{phone:this.phone}).then((function(o){if(t.hideLoading(),100==o.code){t.showLoading({icon:"success",title:"发送成功！",success:function(){setTimeout((function(){t.hideLoading()}),2e3)}});var e=null,i=60;e=setInterval((function(){n.btnStr=i+"s后重新获取",i--,0==i&&(clearInterval(e),n.codeFlag=!0,n.btnStr="获取验证码")}),1e3)}else t.hideLoading(),t.showToast({icon:"none",title:"发送验证码失败！"}),n.codeFlag=!0}))):/^1[3456789]\d{9}$/.test(this.phone)?t.showToast({title:"正在获取，请稍后！",icon:"none"}):this.codeFlag=!0},submitInfo:function(){var n=this;this.$http.post("puparent/loginPhone",{type:this.type,phone:this.phone,parentId:this.parentId}).then((function(o){if(300==o.code)t.navigateTo({url:"reg?phone="+n.phone});else if(100==o.code){var e="";e=JSON.stringify(o.info),t.setStorageSync("userInfo",e),t.showToast({icon:"none",title:"登录成功！"}),setTimeout((function(){t.switchTab({url:"./index"})}),2e3)}}))}}};n.default=o}).call(this,o("543d")["default"])},"131f":function(t,n,o){"use strict";var e=o("158b"),i=o.n(e);i.a},"158b":function(t,n,o){},c297:function(t,n,o){"use strict";(function(t){o("83be");e(o("66fd"));var n=e(o("c4e6"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("543d")["createPage"])},c4e6:function(t,n,o){"use strict";o.r(n);var e=o("ff79"),i=o("0228");for(var c in i)"default"!==c&&function(t){o.d(n,t,(function(){return i[t]}))}(c);o("131f");var s,a=o("f0c5"),r=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,"57249dd3",null,!1,e["a"],s);n["default"]=r.exports},ff79:function(t,n,o){"use strict";var e,i=function(){var t=this,n=t.$createElement;t._self._c},c=[];o.d(n,"b",(function(){return i})),o.d(n,"c",(function(){return c})),o.d(n,"a",(function(){return e}))}},[["c297","common/runtime","common/vendor"]]]);