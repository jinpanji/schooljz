(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"1dfe":function(t,n,e){},"5b61":function(t,n,e){"use strict";var i=e("1dfe"),o=e.n(i);o.a},6660:function(t,n,e){"use strict";e.r(n);var i=e("a247"),o=e.n(i);for(var c in i)"default"!==c&&function(t){e.d(n,t,(function(){return i[t]}))}(c);n["default"]=o.a},7881:function(t,n,e){"use strict";(function(t){e("83be");i(e("66fd"));var n=i(e("c449"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"809a":function(t,n,e){"use strict";var i,o=function(){var t=this,n=t.$createElement;t._self._c},c=[];e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return i}))},a247:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=function(){e.e("components/common/trip").then(function(){return resolve(e("637b"))}.bind(null,e)).catch(e.oe)},c=function(){e.e("components/common/buslist").then(function(){return resolve(e("acee"))}.bind(null,e)).catch(e.oe)},s=e("57eb"),a={components:{Trip:o,Buslist:c},data:function(){return{title:"Hello",form:{},isLogin:!0,widths:[10,0],width1:0,flag:!1,list:["光谷大道五里湾","光谷大道金融港","光谷大三李陈","光谷大道关南村","光谷大道当代国际花园","光谷大道现代世贸中心"],childrenList:[],imgUrl:"",childCheck:null,parentInfo:{},childLines:{},siteInfo:{},sxFlag:!0,siteInfoData:{},homeInfo:{},date:"",dayList:["周日","周一","周二","周三","周四","周五","周六"],day:null,city:""}},watch:{widths:function(t,n){console.log(t)},deep:!0},onLoad:function(){i=new s({key:"SX7BZ-DJI6G-G5OQK-IDBI4-RZ6TO-33FBA"}),this.imgUrl=this.$imgurl,t.authorize({scope:"userInfo"});var n=new Date,e="";e=n.getFullYear()+"年",e+=n.getMonth()+1+"月",e+=n.getDate()+"日",this.date=e;var o=null;o=n.getDay(),this.day=this.dayList[o]},onShow:function(){var n=t.getStorageSync("userInfo");n?(n=JSON.parse(n),this.parentInfo=n):(t.showToast({icon:"none",title:"您还未登录，请先登录!"}),setTimeout((function(){t.navigateTo({url:"../my/login"})}),1e3));var e=t.getStorageSync("childId");e&&(this.childCheck=e),this.getuserinfo()},methods:{getuserinfo:function(){var n=this;this.$http.post("puchildren/listByParentId",{parentId:this.parentInfo.id}).then((function(e){100==e.code&&(e.info.length>0?(n.childrenList=e.info,n.childCheck||(n.childCheck=e.info[0].id,t.setStorageSync("childId",e.info[0].id)),n.getmainList()):(t.removeStorageSync("childId"),n.childCheck=""),n.getLineInfo())}))},getLineInfo:function(){var t=this;console.log("获取当前线路"),this.$http.post("puline/currentLine",{childrenId:this.childCheck}).then((function(n){100==n.code&&(t.childLines=n.info,n.info?t.list=n.info.sites:t.list=[])}))},getmainList:function(){var t=this;this.homeInfo={},this.siteInfoData={},this.$http.post("puridingrecord/mainList",{childrenId:this.childCheck}).then((function(n){if(100==n.code){t.siteInfo=n.info;var e=n.info;e.forEach((function(n,e){1==n.type?t.siteInfoData.takeTime||(t.siteInfoData=n):t.homeInfo=n}))}}))},changeChild:function(n){this.childCheck=n.id,t.setStorageSync("childId",n.id),this.getLineInfo(),this.getmainList()},goRouter:function(){this.isLogin?t.navigateTo({url:"../../components/msg/userinfo"}):t.navigateTo({url:"../my/login"})},touchEnd:function(){this.flag&&(console.log("查看线路安全报告"),t.navigateTo({url:"../../components/msg/security"}))},goInfo:function(n){switch(n){case 1:t.navigateTo({url:"../../components/msg/Itineraryrecord"});break;case 2:t.navigateTo({url:"../../components/complaint/index?id="+this.childCheck});break;case 3:t.navigateTo({url:"../../components/info/trip"});break}},goF5:function(){this.getLineInfo(),this.getmainList()},getcitycode:function(){var n=this;t.getLocation({success:function(e){console.log(e);var o=e.latitude,c=e.longitude;i.reverseGeocoder({location:{latitude:o,longitude:c},success:function(e){var i=e.result.address_component;console.log(e),n.city=i.city;var o=n.city.substring(2,-1),c=i.province;c=c.replace("省",""),t.request({url:"https://api.yytianqi.com/citylist/id/1",success:function(t){var e=t.data.list;e.forEach((function(t,e){if(t.name==c){var i=t.list;i.forEach((function(t,e){t.name.substring(2,-1)==o&&n.getWeather(t.list[0].city_id)}))}}))}})},fail:function(t){console.log(t)},complete:function(t){}})}})},getcode:function(t){},getWeather:function(n){console.log("获取天启"),t.request({url:"https://api.yytianqi.com/observe?city="+n+"&key=cwhq5h588cdmctfc",success:function(t){console.log(t)}})}}};n.default=a}).call(this,e("543d")["default"])},c449:function(t,n,e){"use strict";e.r(n);var i=e("809a"),o=e("6660");for(var c in o)"default"!==c&&function(t){e.d(n,t,(function(){return o[t]}))}(c);e("5b61");var s,a=e("f0c5"),r=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,"222b55dc",null,!1,i["a"],s);n["default"]=r.exports}},[["7881","common/runtime","common/vendor"]]]);